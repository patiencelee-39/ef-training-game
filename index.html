<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸ·è¡ŒåŠŸèƒ½è¨“ç·´éŠæˆ² - v2.1 æœ€ä½³å¯¦è¸ç‰ˆ</title>
    
    <!-- 
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘  åŸ·è¡ŒåŠŸèƒ½è¨“ç·´éŠæˆ² (Executive Function Training Game)                          â•‘
    â•‘  ç‰ˆæœ¬ï¼šv2.1 æœ€ä½³å¯¦è¸ç‰ˆ                                                        â•‘
    â•‘  ç”¨é€”ï¼šè¨“ç·´ ADHD ä¸å°ˆæ³¨å‹å­¸ç”Ÿçš„å·¥ä½œè¨˜æ†¶èˆ‡æŠ‘åˆ¶æ§åˆ¶èƒ½åŠ›                           â•‘
    â•‘  è¨­è¨ˆä¾æ“šï¼šGo/No-Go å¯¦é©—å…¸ç¯„                                                  â•‘
    â•‘                                                                              â•‘
    â•‘  ç¨‹å¼ç¢¼éµå¾ªã€Œç¨‹å¼ç¢¼è‰¯å¥½å¯¦è¸å®Œæ•´æŒ‡å—ã€ï¼š                                         â•‘
    â•‘  1. æè¿°æ€§å‘½å - è®Šæ•¸ã€å‡½æ•¸åç¨±æ¸…æ¥šè¡¨é”ç”¨é€”                                    â•‘
    â•‘  2. å–®ä¸€è·è²¬åŸå‰‡ - æ¯å€‹å‡½æ•¸åªåšä¸€ä»¶äº‹                                          â•‘
    â•‘  3. å¸¸æ•¸ä½¿ç”¨å…¨å¤§å¯« - è¨­å®šå€¼é›†ä¸­ç®¡ç†                                            â•‘
    â•‘  4. æœ‰æ„ç¾©çš„è¨»è§£ - è§£é‡‹ã€Œç‚ºä»€éº¼ã€è€Œéã€Œåšä»€éº¼ã€                                 â•‘
    â•‘  5. æ—©æœŸè¿”å›æ¨¡å¼ - é¿å…æ·±åº¦åµŒå¥—                                               â•‘
    â•‘  6. é©ç•¶çš„ç©ºè¡Œåˆ†éš” - æé«˜å¯è®€æ€§                                               â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    -->

    <style>
        /* 
        ============================================================
        å€å¡Š 1ï¼šCSS æ¨£å¼è¨­å®š
        ============================================================
        èªªæ˜ï¼šæ§åˆ¶éŠæˆ²çš„è¦–è¦ºå‘ˆç¾ï¼ŒåŒ…æ‹¬é¡è‰²ã€å¤§å°ã€ä½ç½®ã€å‹•ç•«æ•ˆæœ
        è¨­è¨ˆåŸå‰‡ï¼š
        - ä½¿ç”¨æ¼¸å±¤èƒŒæ™¯å¢åŠ è¦–è¦ºå¸å¼•åŠ›ï¼ˆé©åˆå…’ç«¥ä½¿ç”¨è€…ï¼‰
        - æŒ‰éˆ•å°ºå¯¸åŠ å¤§ï¼Œæ–¹ä¾¿é»æ“Š
        - å›é¥‹è¨Šæ¯ä½¿ç”¨æ˜é¡¯çš„ç¶ è‰²ï¼ˆæ­£ç¢ºï¼‰èˆ‡ç´…è‰²ï¼ˆéŒ¯èª¤ï¼‰
        ============================================================
        */

        /* ----- 1.1 å…¨åŸŸé‡ç½®èˆ‡åŸºæœ¬è¨­å®š ----- */
        /* é‡ç½®æ‰€æœ‰å…ƒç´ çš„é è¨­é‚Šè·ï¼Œç¢ºä¿è·¨ç€è¦½å™¨ä¸€è‡´æ€§ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* é é¢ä¸»é«”è¨­å®š */
        body {
            /* ä½¿ç”¨å¾®è»Ÿæ­£é»‘é«”ï¼Œç¢ºä¿ä¸­æ–‡é¡¯ç¤ºæ¸…æ™° */
            font-family: "Microsoft JhengHei", "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
            /* ç´«è‰²æ¼¸å±¤èƒŒæ™¯ï¼Œç‡Ÿé€ å°ˆæ³¨ä¸”ä¸åˆºçœ¼çš„æ°›åœ */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            /* æœ€å°é«˜åº¦è¨­ç‚ºè¦–çª—é«˜åº¦ï¼Œç¢ºä¿èƒŒæ™¯å¡«æ»¿ */
            min-height: 100vh;
            /* ä½¿ç”¨ Flexbox ç½®ä¸­éŠæˆ²å®¹å™¨ */
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* ----- 1.2 éŠæˆ²ä¸»å®¹å™¨ ----- */
        .game-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            /* é™°å½±æ•ˆæœå¢åŠ ç«‹é«”æ„Ÿ */
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            /* é™åˆ¶æœ€å¤§å¯¬åº¦ï¼Œåœ¨å¤§è¢å¹•ä¸Šä¸æœƒéå¯¬ */
            max-width: 500px;
            width: 100%;
            text-align: center;
        }

        /* ----- 1.3 æ¨™é¡Œæ¨£å¼ ----- */
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.8em;
        }

        .subtitle {
            color: #666;
            margin-bottom: 20px;
            font-size: 0.9em;
        }

        /* ----- 1.4 éŠæˆ²å€åŸŸ ----- */
        .game-area {
            background: #f5f5f5;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* ----- 1.5 åˆºæ¿€å‘ˆç¾å€ï¼ˆé¡¯ç¤ºæ˜Ÿæ˜Ÿæˆ–å‰å‰çš„åœ“å½¢å€åŸŸï¼‰----- */
        .stimulus {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            /* å­—é«”å¤§å°è¨­ç‚º 3emï¼Œç¢ºä¿åœ–æ¡ˆæ¸…æ™°å¯è¦‹ */
            font-size: 3em;
            margin: 20px 0;
            /* éæ¸¡å‹•ç•«ï¼Œè®“ç‹€æ…‹è®Šæ›æ›´å¹³æ»‘ */
            transition: all 0.3s ease;
        }

        /* Go åˆºæ¿€ï¼ˆæ˜Ÿæ˜Ÿï¼‰- ä½¿ç”¨ç¶ è‰²ï¼Œå‚³é”ã€Œè¡Œå‹•ã€çš„æ„æ¶µ */
        .stimulus.go {
            background: #4CAF50;
            color: white;
            animation: pulse 0.5s ease;
        }

        /* No-Go åˆºæ¿€ï¼ˆå‰å‰ï¼‰- ä½¿ç”¨ç´…è‰²ï¼Œå‚³é”ã€Œåœæ­¢ã€çš„æ„æ¶µ */
        .stimulus.nogo {
            background: #f44336;
            color: white;
            animation: pulse 0.5s ease;
        }

        /* ä¸­æ€§ç‹€æ…‹ï¼ˆç­‰å¾…ä¸­ï¼‰- ä½¿ç”¨ç°è‰² */
        .stimulus.neutral {
            background: #ddd;
            color: #999;
        }

        /* è„ˆè¡å‹•ç•«ï¼šåˆºæ¿€å‡ºç¾æ™‚çš„è¦–è¦ºæ•ˆæœï¼Œå¸å¼•æ³¨æ„åŠ› */
        @keyframes pulse {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* ----- 1.6 æŒ‰éˆ•æ¨£å¼ ----- */
        .btn {
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        /* ä¸»è¦æŒ‰éˆ•ï¼ˆé–‹å§‹éŠæˆ²ã€åŒ¯å‡ºç­‰ï¼‰*/
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        /* åæ‡‰æŒ‰éˆ•ï¼ˆéŠæˆ²ä¸­é»æ“Šçš„å¤§æŒ‰éˆ•ï¼‰*/
        /* è¨­è¨ˆè€ƒé‡ï¼šæŒ‰éˆ•è¦å¤ å¤§ï¼Œè®“å…’ç«¥å®¹æ˜“é»æ“Š */
        .btn-action {
            background: #4CAF50;
            color: white;
            font-size: 1.5em;
            padding: 20px 60px;
        }

        .btn-action:hover {
            background: #45a049;
        }

        .btn-action:active {
            transform: scale(0.95);
        }

        /* ----- 1.7 èªªæ˜å€å¡Š ----- */
        .instruction {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            text-align: left;
            border-radius: 0 10px 10px 0;
        }

        .instruction h3 {
            color: #1976D2;
            margin-bottom: 8px;
        }

        .instruction p {
            color: #333;
            line-height: 1.6;
        }

        /* ----- 1.8 åˆ†æ•¸æ¿ ----- */
        .score-board {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .score-item {
            background: #f0f0f0;
            padding: 15px 25px;
            border-radius: 10px;
        }

        .score-item .label {
            font-size: 0.8em;
            color: #666;
        }

        .score-item .value {
            font-size: 1.8em;
            font-weight: bold;
            color: #333;
        }

        /* ----- 1.9 å›é¥‹è¨Šæ¯ ----- */
        .feedback {
            font-size: 1.5em;
            font-weight: bold;
            margin: 15px 0;
            min-height: 40px;
        }

        /* æ­£ç¢ºå›é¥‹ - ç¶ è‰²ï¼Œçµ¦äºˆæ­£å‘é¼“å‹µ */
        .feedback.correct {
            color: #4CAF50;
        }

        /* éŒ¯èª¤å›é¥‹ - ç´…è‰²ï¼Œæç¤ºéœ€è¦æ”¹é€² */
        .feedback.incorrect {
            color: #f44336;
        }

        /* ----- 1.10 é€²åº¦æ¢ ----- */
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        /* ----- 1.11 çµæœé é¢ ----- */
        .results {
            text-align: left;
        }

        .results h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .result-item .label {
            color: #666;
        }

        .result-item .value {
            font-weight: bold;
            color: #333;
        }

        /* ----- 1.12 æ•¸æ“šè¡¨æ ¼ ----- */
        .data-section {
            margin-top: 20px;
            text-align: left;
        }

        .data-section h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85em;
            margin-top: 10px;
        }

        .data-table th,
        .data-table td {
            padding: 8px;
            border: 1px solid #ddd;
            text-align: center;
        }

        .data-table th {
            background: #f5f5f5;
        }

        /* ----- 1.13 å·¥å…·é¡åˆ¥ ----- */
        /* éš±è—å…ƒç´ ï¼Œä½¿ç”¨ !important ç¢ºä¿å„ªå…ˆç´š */
        .hidden {
            display: none !important;
        }

        /* ç‰ˆæœ¬æ¨™ç±¤ */
        .version-tag {
            font-size: 0.7em;
            color: #999;
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <!-- 
    ============================================================
    å€å¡Š 2ï¼šHTML çµæ§‹
    ============================================================
    èªªæ˜ï¼šå®šç¾©éŠæˆ²çš„å››å€‹ä¸»è¦ç•«é¢
    1. startScreen - é–‹å§‹ç•«é¢ï¼ˆé¡¯ç¤ºè¦å‰‡èªªæ˜ï¼‰
    2. gameScreen - éŠæˆ²ç•«é¢ï¼ˆé€²è¡Œ Go/No-Go ä»»å‹™ï¼‰
    3. memoryTestScreen - è¨˜æ†¶æ¸¬è©¦ç•«é¢ï¼ˆæ¸¬è©¦å·¥ä½œè¨˜æ†¶ï¼‰
    4. resultScreen - çµæœç•«é¢ï¼ˆé¡¯ç¤ºçµ±è¨ˆèˆ‡åŒ¯å‡ºåŠŸèƒ½ï¼‰
    
    è¨­è¨ˆåŸå‰‡ï¼š
    - ä½¿ç”¨èªç¾©åŒ–çš„ ID å‘½åï¼Œæ¸…æ¥šè¡¨é”å…ƒç´ ç”¨é€”
    - ç•«é¢åˆ‡æ›é€é CSS çš„ .hidden é¡åˆ¥æ§åˆ¶
    ============================================================
    -->

    <div class="game-container">
        
        <!-- ===== 2.1 é–‹å§‹ç•«é¢ ===== -->
        <div id="startScreen">
            <h1>ğŸ§  åŸ·è¡ŒåŠŸèƒ½è¨“ç·´éŠæˆ²</h1>
            <p class="subtitle">å·¥ä½œè¨˜æ†¶ + æŠ‘åˆ¶æ§åˆ¶ è¨“ç·´</p>

            <!-- éŠæˆ²è¦å‰‡èªªæ˜ -->
            <div class="instruction">
                <h3>ğŸ“‹ éŠæˆ²è¦å‰‡</h3>
                <p>
                    <strong>1. çœ‹åˆ° â­ æ˜Ÿæ˜Ÿ â†’ æŒ‰ä¸‹æŒ‰éˆ•ï¼</strong><br>
                    <strong>2. çœ‹åˆ° âŒ å‰å‰ â†’ ä¸è¦æŒ‰ï¼å¿ä½ï¼</strong><br>
                    <strong>3. è¨˜ä½å‰ä¸€å€‹æ˜¯ä»€éº¼</strong>ï¼ˆä¹‹å¾Œæœƒå•ä½ ï¼‰
                </p>
            </div>

            <!-- è¨“ç·´ç›®æ¨™èªªæ˜ -->
            <div class="instruction">
                <h3>ğŸ¯ è¨“ç·´ç›®æ¨™</h3>
                <p>
                    â€¢ <strong>å·¥ä½œè¨˜æ†¶</strong>ï¼šè¨˜ä½çœ‹éçš„åœ–æ¡ˆ<br>
                    â€¢ <strong>æŠ‘åˆ¶æ§åˆ¶</strong>ï¼šçœ‹åˆ°å‰å‰è¦å¿ä½ä¸æŒ‰
                </p>
            </div>

            <button class="btn btn-primary" onclick="GameController.startGame()">
                é–‹å§‹éŠæˆ²
            </button>
            <p class="version-tag">v2.1 æœ€ä½³å¯¦è¸ç‰ˆ</p>
        </div>

        <!-- ===== 2.2 éŠæˆ²ç•«é¢ ===== -->
        <div id="gameScreen" class="hidden">
            <!-- é¡Œè™Ÿé¡¯ç¤º -->
            <h2>ç¬¬ <span id="currentTrialDisplay">1</span> / <span id="totalTrialsDisplay">10</span> é¡Œ</h2>

            <!-- é€²åº¦æ¢ -->
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>

            <!-- åˆ†æ•¸æ¿ -->
            <div class="score-board">
                <div class="score-item">
                    <div class="label">æ­£ç¢º</div>
                    <div class="value" id="correctCountDisplay">0</div>
                </div>
                <div class="score-item">
                    <div class="label">éŒ¯èª¤</div>
                    <div class="value" id="errorCountDisplay">0</div>
                </div>
            </div>

            <!-- åˆºæ¿€å‘ˆç¾å€ -->
            <div class="game-area">
                <div class="stimulus neutral" id="stimulusDisplay">?</div>
                <div class="feedback" id="feedbackDisplay"></div>
            </div>

            <!-- åæ‡‰æŒ‰éˆ• -->
            <button class="btn btn-action" id="responseButton" onclick="GameController.recordResponse()">
                æŒ‰é€™è£¡ï¼
            </button>
        </div>

        <!-- ===== 2.3 è¨˜æ†¶æ¸¬è©¦ç•«é¢ ===== -->
        <div id="memoryTestScreen" class="hidden">
            <h2>ğŸ¤” è¨˜æ†¶æ¸¬è©¦</h2>
            <p style="margin: 20px 0; font-size: 1.1em;">
                å‰›æ‰<strong>å€’æ•¸ç¬¬äºŒå€‹</strong>åœ–æ¡ˆæ˜¯ä»€éº¼ï¼Ÿ
            </p>

            <!-- è¨˜æ†¶æ¸¬è©¦é¸é … -->
            <div style="display: flex; justify-content: center; gap: 20px; margin: 30px 0;">
                <button class="btn btn-primary" onclick="GameController.checkMemoryAnswer('star')" 
                        style="font-size: 2em; padding: 20px 40px;">â­</button>
                <button class="btn btn-primary" onclick="GameController.checkMemoryAnswer('cross')" 
                        style="font-size: 2em; padding: 20px 40px;">âŒ</button>
            </div>
        </div>

        <!-- ===== 2.4 çµæœç•«é¢ ===== -->
        <div id="resultScreen" class="hidden">
            <h2>ğŸ“Š éŠæˆ²çµæœ</h2>

            <!-- çµ±è¨ˆæ‘˜è¦ -->
            <div class="results">
                <div class="result-item">
                    <span class="label">ç¸½é¡Œæ•¸</span>
                    <span class="value" id="resultTotalTrials">-</span>
                </div>
                <div class="result-item">
                    <span class="label">æ­£ç¢ºæ¬¡æ•¸</span>
                    <span class="value" id="resultCorrectCount">-</span>
                </div>
                <div class="result-item">
                    <span class="label">æ­£ç¢ºç‡</span>
                    <span class="value" id="resultAccuracyRate">-</span>
                </div>
                <div class="result-item">
                    <span class="label">å¹³å‡åæ‡‰æ™‚é–“</span>
                    <span class="value" id="resultAverageReactionTime">-</span>
                </div>
                <div class="result-item">
                    <span class="label">æŠ‘åˆ¶æˆåŠŸç‡</span>
                    <span class="value" id="resultInhibitionRate">-</span>
                </div>
                <div class="result-item">
                    <span class="label">è¨˜æ†¶æ¸¬è©¦</span>
                    <span class="value" id="resultMemoryTest">-</span>
                </div>
            </div>

            <!-- è©³ç´°æ•¸æ“šè¡¨æ ¼ -->
            <div class="data-section">
                <h3>ğŸ“ è©³ç´°æ•¸æ“šï¼ˆå¯åŒ¯å‡ºï¼‰</h3>
                <table class="data-table" id="dataTable">
                    <thead>
                        <tr>
                            <th>é¡Œè™Ÿ</th>
                            <th>é¡å‹</th>
                            <th>åæ‡‰</th>
                            <th>æ­£ç¢º</th>
                            <th>åæ‡‰æ™‚é–“(ms)</th>
                        </tr>
                    </thead>
                    <tbody id="dataTableBody"></tbody>
                </table>
                <!-- ç¬¬ 476-489 è¡Œï¼ˆä¿®æ”¹å¾Œï¼‰-->
                <div class="export-info-box" style="margin-top: 15px; padding: 15px; background: #f0f7ff; border: 2px solid #2196F3; border-radius: 10px;">
                    <h4 style="color: #1976D2; margin-bottom: 10px;">ğŸ“Š è³‡æ–™åŒ¯å‡ºèªªæ˜</h4>
                    <ul style="margin: 0; padding-left: 20px; line-height: 1.8; color: #555;">
                        <li><strong>æª”æ¡ˆæ ¼å¼ï¼š</strong>CSVï¼ˆé€—è™Ÿåˆ†éš”å€¼ï¼‰</li>
                        <li><strong>æª”æ¡ˆå…§å®¹ï¼š</strong>è©¦é¡Œè³‡æ–™ã€åæ‡‰æ™‚é–“ã€æ­£ç¢ºç‡</li>
                        <li><strong>ä½¿ç”¨ç”¨é€”ï¼š</strong>å­¸è¡“ç ”ç©¶ã€æ•™å­¸åˆ†æ</li>
                        <li><strong>éš±ç§ä¿è­·ï¼š</strong>ä¸å«å€‹äººèº«åˆ†è³‡è¨Š</li>
                    </ul>
                    <button class="btn btn-primary" onclick="DataExporter.exportToCSV()" style="margin-top: 15px; width: 100%;">
                        ğŸ“¥ åŒ¯å‡º CSV è³‡æ–™
                    </button>
                </div>
            <!-- ç¬¬ 481-500 è¡Œï¼ˆä¿®æ”¹å¾Œï¼‰-->
            <button class="btn btn-primary" onclick="GameController.restartGame()" style="margin-top: 20px;">
                å†ç©ä¸€æ¬¡
            </button>
                    </div>
                </div>

                <!-- âœ¨ æ–°å¢ï¼šå®Œæ•´é å°¾ âœ¨ -->
                <footer style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); margin-top: 30px; padding: 30px 20px; border-top: 3px solid #667eea;">
                    <div style="max-width: 500px; margin: 0 auto; text-align: center;">
                        <!-- é å°¾æ¨™é¡Œ -->
                        <p style="font-size: 1em; color: #333; margin-bottom: 15px; font-weight: bold;">
                            åŸ·è¡ŒåŠŸèƒ½è¨“ç·´éŠæˆ²
                        </p>
                        
                        <!-- èªªæ˜æ–‡å­— -->
                        <p style="font-size: 0.85em; color: #666; margin-bottom: 20px; line-height: 1.6;">
                            ä¸­åŸå¤§å­¸ç‰¹æ®Šæ•™è‚²å­¸ç³»ç¢©å£«ç­å¯¦å‹™å ±å‘Š<br>
                            ç”¨æ–¼å”åŠ© ADHD ä¸å°ˆæ³¨å‹å­¸ç«¥é€²è¡ŒèªçŸ¥è¨“ç·´
                        </p>
                        
                        <!-- é€£çµå€ -->
                        <div style="margin-bottom: 15px;">
                            <a href="privacy.html" target="_blank" style="display: inline-block; margin: 5px 10px; padding: 8px 15px; background: white; color: #667eea; text-decoration: none; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: all 0.3s;">
                                ğŸ”’ éš±ç§æ¬Šæ”¿ç­–
                            </a>
                            <a href="https://github.com/patiencelee-39/ef-training-game" target="_blank" style="display: inline-block; margin: 5px 10px; padding: 8px 15px; background: white; color: #667eea; text-decoration: none; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: all 0.3s;">
                                ğŸ’» é–‹æºå°ˆæ¡ˆ
                            </a>
                        </div>
                        
                        <!-- ç‰ˆæ¬Šè³‡è¨Š -->
                        <p style="font-size: 0.75em; color: #999; margin-top: 15px;">
                            Â© 2026 ä¸­åŸå¤§å­¸ç‰¹æ®Šæ•™è‚²å­¸ç³» | åƒ…ä¾›å­¸è¡“ç ”ç©¶ä½¿ç”¨
                        </p>
                    </div>
                </footer>
                <!-- âœ¨ æ–°å¢çµæŸ âœ¨ -->

                <script>
        /*
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘  å€å¡Š 3ï¼šJavaScript éŠæˆ²é‚è¼¯                                                  â•‘
        â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
        â•‘  ç¨‹å¼æ¶æ§‹èªªæ˜ï¼š                                                               â•‘
        â•‘                                                                              â•‘
        â•‘  æœ¬ç¨‹å¼æ¡ç”¨æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œå°‡åŠŸèƒ½åˆ†ç‚ºä»¥ä¸‹å¹¾å€‹ç¨ç«‹æ¨¡çµ„ï¼š                             â•‘
        â•‘  1. GAME_CONFIG - éŠæˆ²è¨­å®šå¸¸æ•¸ï¼ˆå…¨å¤§å¯«å‘½åï¼‰                                   â•‘
        â•‘  2. GameState - éŠæˆ²ç‹€æ…‹ç®¡ç†                                                 â•‘
        â•‘  3. StimulusGenerator - åˆºæ¿€åºåˆ—ç”¢ç”Ÿå™¨                                        â•‘
        â•‘  4. UIManager - ä½¿ç”¨è€…ä»‹é¢ç®¡ç†                                               â•‘
        â•‘  5. TrialProcessor - è©¦é¡Œè™•ç†é‚è¼¯                                            â•‘
        â•‘  6. StatisticsCalculator - çµ±è¨ˆè¨ˆç®—                                          â•‘
        â•‘  7. DataExporter - è³‡æ–™åŒ¯å‡º                                                  â•‘
        â•‘  8. GameController - éŠæˆ²æµç¨‹æ§åˆ¶ï¼ˆä¸»æ§åˆ¶å™¨ï¼‰                                  â•‘
        â•‘                                                                              â•‘
        â•‘  è¨­è¨ˆåŸå‰‡ï¼š                                                                   â•‘
        â•‘  - å–®ä¸€è·è²¬åŸå‰‡ï¼šæ¯å€‹æ¨¡çµ„åªè² è²¬ä¸€é …åŠŸèƒ½                                        â•‘
        â•‘  - æè¿°æ€§å‘½åï¼šå‡½æ•¸åç¨±ä½¿ç”¨å‹•è©é–‹é ­ï¼Œæ¸…æ¥šè¡¨é”åŠŸèƒ½                               â•‘
        â•‘  - å¸¸æ•¸é›†ä¸­ç®¡ç†ï¼šæ‰€æœ‰å¯èª¿æ•´çš„åƒæ•¸æ”¾åœ¨ GAME_CONFIG                              â•‘
        â•‘  - æ—©æœŸè¿”å›æ¨¡å¼ï¼šé¿å…æ·±åº¦åµŒå¥—çš„ if-else                                        â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */


        /* 
        ============================================================
        3.1 éŠæˆ²è¨­å®šå¸¸æ•¸ (GAME_CONFIG)
        ============================================================
        èªªæ˜ï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰å¯èª¿æ•´çš„éŠæˆ²åƒæ•¸
        å‘½åè¦ç¯„ï¼šå¸¸æ•¸ä½¿ç”¨å…¨å¤§å¯«å­—æ¯ï¼Œç”¨åº•ç·šåˆ†éš”
        
        èª¿æ•´æŒ‡å—ï¼š
        - TOTAL_TRIALS: å¢åŠ é¡Œæ•¸å¯æé«˜è¨“ç·´å¼·åº¦ï¼Œä½†å¯èƒ½é™ä½å…’ç«¥å°ˆæ³¨åŠ›
        - STIMULUS_DURATION_MS: ç¸®çŸ­æ™‚é–“å¯å¢åŠ é›£åº¦
        - GO_STIMULUS_RATIO: èª¿æ•´ Go/No-Go æ¯”ä¾‹å½±éŸ¿æŠ‘åˆ¶æ§åˆ¶è¨“ç·´å¼·åº¦
        ============================================================
        */
        const GAME_CONFIG = {
            // ç¸½é¡Œæ•¸ï¼šé è¨­ 10 é¡Œï¼Œé©åˆå–®æ¬¡è¨“ç·´
            TOTAL_TRIALS: 10,
            
            // åˆºæ¿€å‘ˆç¾æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰ï¼š1500ms çµ¦äºˆè¶³å¤ åæ‡‰æ™‚é–“
            STIMULUS_DURATION_MS: 1500,
            
            // é¡Œç›®é–“éš”æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰ï¼š1000ms è®“å¤§è…¦æœ‰çŸ­æš«ä¼‘æ¯
            INTER_TRIAL_INTERVAL_MS: 1000,
            
            // Go åˆºæ¿€æ¯”ä¾‹ï¼š70% æ˜Ÿæ˜Ÿï¼Œ30% å‰å‰
            // è¨­è¨ˆä¾æ“šï¼šè¼ƒé«˜çš„ Go æ¯”ä¾‹æœƒå»ºç«‹ã€ŒæŒ‰æŒ‰éˆ•ã€çš„å„ªå‹¢åæ‡‰ï¼Œ
            // ä½¿å¾—æŠ‘åˆ¶ No-Go åˆºæ¿€æ›´å…·æŒ‘æˆ°æ€§
            GO_STIMULUS_RATIO: 0.7,
            
            // åˆºæ¿€é¡å‹å®šç¾©
            STIMULUS_TYPES: {
                GO: 'go',       // éœ€è¦åæ‡‰çš„åˆºæ¿€
                NOGO: 'nogo'    // éœ€è¦æŠ‘åˆ¶åæ‡‰çš„åˆºæ¿€
            },
            
            // åˆºæ¿€ç¬¦è™Ÿ
            STIMULUS_SYMBOLS: {
                GO: 'â­',       // æ˜Ÿæ˜Ÿä»£è¡¨ã€Œè¡Œå‹•ã€
                NOGO: 'âŒ',     // å‰å‰ä»£è¡¨ã€Œåœæ­¢ã€
                NEUTRAL: '?'   // å•è™Ÿä»£è¡¨ã€Œç­‰å¾…ã€
            }
        };


        /* 
        ============================================================
        3.2 éŠæˆ²ç‹€æ…‹ç®¡ç† (GameState)
        ============================================================
        èªªæ˜ï¼šç®¡ç†éŠæˆ²é‹è¡Œæ™‚çš„æ‰€æœ‰ç‹€æ…‹è³‡æ–™
        è¨­è¨ˆåŸå‰‡ï¼š
        - å°‡ç‹€æ…‹é›†ä¸­ç®¡ç†ï¼Œé¿å…å…¨åŸŸè®Šæ•¸æ•£è½å„è™•
        - æä¾› reset() æ–¹æ³•ç¢ºä¿æ¯æ¬¡éŠæˆ²é–‹å§‹æ™‚ç‹€æ…‹ä¹¾æ·¨
        ============================================================
        */
        const GameState = {
            // ----- åŸºæœ¬è¨ˆæ•¸ -----
            currentTrialNumber: 0,      // ç•¶å‰é¡Œè™Ÿï¼ˆ1-basedï¼‰
            correctResponseCount: 0,    // æ­£ç¢ºåæ‡‰æ¬¡æ•¸
            errorResponseCount: 0,      // éŒ¯èª¤åæ‡‰æ¬¡æ•¸
            
            // ----- åˆºæ¿€ç›¸é—œ -----
            stimulusSequence: [],       // åˆºæ¿€åºåˆ—é™£åˆ—ï¼ˆå¦‚ï¼š['go', 'nogo', 'go', ...]ï¼‰
            currentStimulusType: null,  // ç•¶å‰åˆºæ¿€é¡å‹ï¼ˆ'go' æˆ– 'nogo'ï¼‰
            
            // ----- æ™‚é–“è¨˜éŒ„ -----
            stimulusOnsetTime: null,    // åˆºæ¿€å‘ˆç¾çš„æ™‚é–“æˆ³è¨˜ï¼ˆç”¨æ–¼è¨ˆç®—åæ‡‰æ™‚é–“ï¼‰
            
            // ----- åæ‡‰ç‹€æ…‹ -----
            hasRespondedToCurrentTrial: false,  // æ˜¯å¦å·²å°ç•¶å‰è©¦é¡Œåšå‡ºåæ‡‰
            isCurrentTrialProcessed: false,     // ç•¶å‰è©¦é¡Œæ˜¯å¦å·²è™•ç†å®Œæˆï¼ˆé˜²æ­¢é‡è¤‡è™•ç†ï¼‰
            isGameActive: false,                // éŠæˆ²æ˜¯å¦é€²è¡Œä¸­
            
            // ----- è¨ˆæ™‚å™¨ -----
            // å„²å­˜ setTimeout çš„ IDï¼Œç”¨æ–¼åœ¨éœ€è¦æ™‚å–æ¶ˆè¨ˆæ™‚å™¨
            // é€™æ˜¯ä¿®å¾©é‡è¤‡è¨˜éŒ„ bug çš„é—œéµ
            currentTimeoutId: null,
            
            // ----- è³‡æ–™æ”¶é›† -----
            trialDataRecords: [],       // å„è©¦é¡Œçš„è©³ç´°è¨˜éŒ„
            isMemoryTestCorrect: null,  // è¨˜æ†¶æ¸¬è©¦çµæœ
            
            /**
             * é‡ç½®éŠæˆ²ç‹€æ…‹
             * 
             * ä½¿ç”¨æ™‚æ©Ÿï¼šæ¯æ¬¡é–‹å§‹æ–°éŠæˆ²æ™‚å‘¼å«
             * è¨­è¨ˆåŸå‰‡ï¼šç¢ºä¿æ‰€æœ‰ç‹€æ…‹å›åˆ°åˆå§‹å€¼ï¼Œé¿å…å‰æ¬¡éŠæˆ²çš„è³‡æ–™å½±éŸ¿æ–°éŠæˆ²
             * 
             * @param {Array} newStimulusSequence - æ–°ç”¢ç”Ÿçš„åˆºæ¿€åºåˆ—
             */
            reset: function(newStimulusSequence) {
                this.currentTrialNumber = 0;
                this.correctResponseCount = 0;
                this.errorResponseCount = 0;
                this.stimulusSequence = newStimulusSequence;
                this.currentStimulusType = null;
                this.stimulusOnsetTime = null;
                this.hasRespondedToCurrentTrial = false;
                this.isCurrentTrialProcessed = false;
                this.isGameActive = true;
                this.currentTimeoutId = null;
                this.trialDataRecords = [];
                this.isMemoryTestCorrect = null;
            }
        };


        /* 
        ============================================================
        3.3 åˆºæ¿€åºåˆ—ç”¢ç”Ÿå™¨ (StimulusGenerator)
        ============================================================
        èªªæ˜ï¼šè² è²¬ç”¢ç”Ÿéš¨æ©ŸåŒ–çš„åˆºæ¿€åºåˆ—
        è·è²¬ï¼š
        - æ ¹æ“šè¨­å®šçš„ Go/No-Go æ¯”ä¾‹ç”¢ç”Ÿåºåˆ—
        - ä½¿ç”¨ Fisher-Yates æ¼”ç®—æ³•é€²è¡Œéš¨æ©Ÿæ‰“äº‚
        ============================================================
        */
        const StimulusGenerator = {
            
            /**
             * ç”¢ç”Ÿéš¨æ©ŸåŒ–çš„åˆºæ¿€åºåˆ—
             * 
             * @returns {Array} åŒ…å« 'go' å’Œ 'nogo' çš„éš¨æ©Ÿåºåˆ—
             * 
             * æ¼”ç®—æ³•èªªæ˜ï¼š
             * 1. æ ¹æ“šæ¯”ä¾‹è¨ˆç®— Go å’Œ No-Go çš„æ•¸é‡
             * 2. å»ºç«‹åŒ…å«æ­£ç¢ºæ•¸é‡çš„åºåˆ—
             * 3. ä½¿ç”¨ Fisher-Yates shuffle éš¨æ©Ÿæ‰“äº‚
             */
            generateRandomSequence: function() {
                const sequence = [];
                
                // è¨ˆç®—å„é¡å‹åˆºæ¿€çš„æ•¸é‡
                const goStimulusCount = Math.floor(
                    GAME_CONFIG.TOTAL_TRIALS * GAME_CONFIG.GO_STIMULUS_RATIO
                );
                const nogoStimulusCount = GAME_CONFIG.TOTAL_TRIALS - goStimulusCount;
                
                // å»ºç«‹åºåˆ—
                for (let i = 0; i < goStimulusCount; i++) {
                    sequence.push(GAME_CONFIG.STIMULUS_TYPES.GO);
                }
                for (let i = 0; i < nogoStimulusCount; i++) {
                    sequence.push(GAME_CONFIG.STIMULUS_TYPES.NOGO);
                }
                
                // éš¨æ©Ÿæ‰“äº‚åºåˆ—
                return this.shuffleArray(sequence);
            },
            
            /**
             * Fisher-Yates æ´—ç‰Œæ¼”ç®—æ³•
             * 
             * @param {Array} array - è¦æ‰“äº‚çš„é™£åˆ—
             * @returns {Array} æ‰“äº‚å¾Œçš„é™£åˆ—
             * 
             * ç‚ºä»€éº¼ä½¿ç”¨ Fisher-Yatesï¼Ÿ
             * - æ™‚é–“è¤‡é›œåº¦ O(n)ï¼Œæ•ˆç‡é«˜
             * - æ¯ç¨®æ’åˆ—çš„æ©Ÿç‡ç›¸ç­‰ï¼ŒçœŸæ­£éš¨æ©Ÿ
             * - æ˜¯æ¥­ç•Œæ¨™æº–çš„æ´—ç‰Œæ¼”ç®—æ³•
             */
            shuffleArray: function(array) {
                const shuffled = [...array]; // è¤‡è£½é™£åˆ—ï¼Œä¸ä¿®æ”¹åŸé™£åˆ—
                
                for (let i = shuffled.length - 1; i > 0; i--) {
                    // ç”¢ç”Ÿ 0 åˆ° i ä¹‹é–“çš„éš¨æ©Ÿæ•´æ•¸
                    const randomIndex = Math.floor(Math.random() * (i + 1));
                    // äº¤æ›å…ƒç´ 
                    [shuffled[i], shuffled[randomIndex]] = [shuffled[randomIndex], shuffled[i]];
                }
                
                return shuffled;
            }
        };


        /* 
        ============================================================
        3.4 ä½¿ç”¨è€…ä»‹é¢ç®¡ç† (UIManager)
        ============================================================
        èªªæ˜ï¼šè² è²¬æ‰€æœ‰ DOM æ“ä½œèˆ‡ç•«é¢æ›´æ–°
        è·è²¬ï¼š
        - åˆ‡æ›ç•«é¢
        - æ›´æ–°é¡¯ç¤ºå…§å®¹
        - é¡¯ç¤ºåˆºæ¿€èˆ‡å›é¥‹
        
        è¨­è¨ˆåŸå‰‡ï¼šå°‡ DOM æ“ä½œé›†ä¸­ç®¡ç†ï¼Œæ–¹ä¾¿ç¶­è­·èˆ‡ä¿®æ”¹
        ============================================================
        */
        const UIManager = {
            
            // ----- ç•«é¢åˆ‡æ›æ–¹æ³• -----
            
            /**
             * é¡¯ç¤ºæŒ‡å®šç•«é¢ï¼Œéš±è—å…¶ä»–ç•«é¢
             * 
             * @param {string} screenId - è¦é¡¯ç¤ºçš„ç•«é¢ ID
             */
            showScreen: function(screenId) {
                // æ‰€æœ‰ç•«é¢ ID
                const allScreenIds = ['startScreen', 'gameScreen', 'memoryTestScreen', 'resultScreen'];
                
                allScreenIds.forEach(id => {
                    const element = document.getElementById(id);
                    if (id === screenId) {
                        element.classList.remove('hidden');
                    } else {
                        element.classList.add('hidden');
                    }
                });
            },
            
            // ----- éŠæˆ²ç•«é¢æ›´æ–°æ–¹æ³• -----
            
            /**
             * æ›´æ–°é¡Œè™Ÿé¡¯ç¤º
             * 
             * @param {number} currentTrial - ç•¶å‰é¡Œè™Ÿ
             * @param {number} totalTrials - ç¸½é¡Œæ•¸
             */
            updateTrialDisplay: function(currentTrial, totalTrials) {
                document.getElementById('currentTrialDisplay').textContent = currentTrial;
                document.getElementById('totalTrialsDisplay').textContent = totalTrials;
            },
            
            /**
             * æ›´æ–°é€²åº¦æ¢
             * 
             * @param {number} progressPercentage - é€²åº¦ç™¾åˆ†æ¯”ï¼ˆ0-100ï¼‰
             */
            updateProgressBar: function(progressPercentage) {
                document.getElementById('progressFill').style.width = progressPercentage + '%';
            },
            
            /**
             * æ›´æ–°åˆ†æ•¸é¡¯ç¤º
             * 
             * @param {number} correctCount - æ­£ç¢ºæ¬¡æ•¸
             * @param {number} errorCount - éŒ¯èª¤æ¬¡æ•¸
             */
            updateScoreDisplay: function(correctCount, errorCount) {
                document.getElementById('correctCountDisplay').textContent = correctCount;
                document.getElementById('errorCountDisplay').textContent = errorCount;
            },
            
            /**
             * é¡¯ç¤ºåˆºæ¿€
             * 
             * @param {string} stimulusType - åˆºæ¿€é¡å‹ï¼ˆ'go', 'nogo', æˆ– 'neutral'ï¼‰
             */
            displayStimulus: function(stimulusType) {
                const stimulusElement = document.getElementById('stimulusDisplay');
                
                // è¨­å®šæ¨£å¼é¡åˆ¥
                stimulusElement.className = 'stimulus ' + stimulusType;
                
                // è¨­å®šé¡¯ç¤ºç¬¦è™Ÿ
                if (stimulusType === GAME_CONFIG.STIMULUS_TYPES.GO) {
                    stimulusElement.textContent = GAME_CONFIG.STIMULUS_SYMBOLS.GO;
                } else if (stimulusType === GAME_CONFIG.STIMULUS_TYPES.NOGO) {
                    stimulusElement.textContent = GAME_CONFIG.STIMULUS_SYMBOLS.NOGO;
                } else {
                    stimulusElement.textContent = GAME_CONFIG.STIMULUS_SYMBOLS.NEUTRAL;
                }
            },
            
            /**
             * é¡¯ç¤ºå›é¥‹è¨Šæ¯
             * 
             * @param {string} message - å›é¥‹è¨Šæ¯
             * @param {boolean} isCorrect - æ˜¯å¦æ­£ç¢º
             */
            displayFeedback: function(message, isCorrect) {
                const feedbackElement = document.getElementById('feedbackDisplay');
                feedbackElement.textContent = message;
                feedbackElement.className = 'feedback ' + (isCorrect ? 'correct' : 'incorrect');
            },
            
            /**
             * æ¸…é™¤å›é¥‹è¨Šæ¯
             */
            clearFeedback: function() {
                const feedbackElement = document.getElementById('feedbackDisplay');
                feedbackElement.textContent = '';
                feedbackElement.className = 'feedback';
            },
            
            // ----- çµæœç•«é¢æ›´æ–°æ–¹æ³• -----
            
            /**
             * é¡¯ç¤ºéŠæˆ²çµæœ
             * 
             * @param {Object} statistics - çµ±è¨ˆè³‡æ–™ç‰©ä»¶
             */
            displayResults: function(statistics) {
                document.getElementById('resultTotalTrials').textContent = 
                    statistics.totalTrials + ' é¡Œ';
                document.getElementById('resultCorrectCount').textContent = 
                    statistics.correctCount + ' æ¬¡';
                document.getElementById('resultAccuracyRate').textContent = 
                    statistics.accuracyRate + '%';
                document.getElementById('resultAverageReactionTime').textContent = 
                    statistics.averageReactionTime + ' ms';
                document.getElementById('resultInhibitionRate').textContent = 
                    statistics.inhibitionRate + '%';
                document.getElementById('resultMemoryTest').textContent = 
                    statistics.memoryTestResult;
            },
            
            /**
             * å¡«å…¥è©³ç´°æ•¸æ“šè¡¨æ ¼
             * 
             * @param {Array} trialDataRecords - è©¦é¡Œè¨˜éŒ„é™£åˆ—
             */
            populateDataTable: function(trialDataRecords) {
                const tableBody = document.getElementById('dataTableBody');
                tableBody.innerHTML = ''; // æ¸…ç©ºç¾æœ‰å…§å®¹
                
                trialDataRecords.forEach(record => {
                    const row = document.createElement('tr');
                    
                    // æ ¹æ“šæ­£ç¢ºèˆ‡å¦è¨­å®šé¡è‰²
                    const correctnessColor = record.isCorrect ? 'green' : 'red';
                    const correctnessSymbol = record.isCorrect ? 'âœ“' : 'âœ—';
                    
                    row.innerHTML = `
                        <td>${record.trialNumber}</td>
                        <td>${record.stimulusType === 'go' ? 'â­ Go' : 'âŒ No-Go'}</td>
                        <td>${record.didRespond ? 'æœ‰æŒ‰' : 'æ²’æŒ‰'}</td>
                        <td style="color: ${correctnessColor}">${correctnessSymbol}</td>
                        <td>${record.reactionTime || '-'}</td>
                    `;
                    
                    tableBody.appendChild(row);
                });
            }
        };


        /* 
        ============================================================
        3.5 è©¦é¡Œè™•ç†å™¨ (TrialProcessor)
        ============================================================
        èªªæ˜ï¼šè² è²¬è™•ç†å–®ä¸€è©¦é¡Œçš„é‚è¼¯
        è·è²¬ï¼š
        - åˆ¤æ–·åæ‡‰æ­£ç¢ºæ€§
        - è¨˜éŒ„è©¦é¡Œè³‡æ–™
        - ç”¢ç”Ÿå›é¥‹è¨Šæ¯
        ============================================================
        */
        const TrialProcessor = {
            
            /**
             * åˆ¤æ–·åæ‡‰æ˜¯å¦æ­£ç¢º
             * 
             * @param {string} stimulusType - åˆºæ¿€é¡å‹ï¼ˆ'go' æˆ– 'nogo'ï¼‰
             * @param {boolean} didRespond - æ˜¯å¦æœ‰åæ‡‰ï¼ˆæŒ‰äº†æŒ‰éˆ•ï¼‰
             * @returns {boolean} åæ‡‰æ˜¯å¦æ­£ç¢º
             * 
             * åˆ¤æ–·é‚è¼¯ï¼š
             * - Go åˆºæ¿€ + æœ‰åæ‡‰ = æ­£ç¢ºï¼ˆæ­£ç¢ºåµæ¸¬ï¼‰
             * - Go åˆºæ¿€ + æ²’åæ‡‰ = éŒ¯èª¤ï¼ˆéºæ¼ï¼‰
             * - No-Go åˆºæ¿€ + æ²’åæ‡‰ = æ­£ç¢ºï¼ˆæˆåŠŸæŠ‘åˆ¶ï¼‰
             * - No-Go åˆºæ¿€ + æœ‰åæ‡‰ = éŒ¯èª¤ï¼ˆéŒ¯èª¤è­¦å ±/æŠ‘åˆ¶å¤±æ•—ï¼‰
             */
            determineResponseCorrectness: function(stimulusType, didRespond) {
                const isGoStimulus = (stimulusType === GAME_CONFIG.STIMULUS_TYPES.GO);
                
                if (isGoStimulus && didRespond) {
                    return true;  // Go + æœ‰æŒ‰ = æ­£ç¢º
                }
                
                if (!isGoStimulus && !didRespond) {
                    return true;  // No-Go + æ²’æŒ‰ = æ­£ç¢ºï¼ˆæˆåŠŸæŠ‘åˆ¶ï¼‰
                }
                
                return false;  // å…¶ä»–æƒ…æ³éƒ½æ˜¯éŒ¯èª¤
            },
            
            /**
             * ç”¢ç”Ÿå›é¥‹è¨Šæ¯
             * 
             * @param {string} stimulusType - åˆºæ¿€é¡å‹
             * @param {boolean} didRespond - æ˜¯å¦æœ‰åæ‡‰
             * @param {boolean} isCorrect - æ˜¯å¦æ­£ç¢º
             * @returns {string} å›é¥‹è¨Šæ¯
             */
            generateFeedbackMessage: function(stimulusType, didRespond, isCorrect) {
                // æ—©æœŸè¿”å›ï¼šæ­£ç¢ºçš„æƒ…æ³
                if (isCorrect) {
                    return 'âœ“ æ­£ç¢ºï¼';
                }
                
                // éŒ¯èª¤çš„æƒ…æ³ï¼šæ ¹æ“šæƒ…å¢ƒçµ¦äºˆå…·é«”å›é¥‹
                const isGoStimulus = (stimulusType === GAME_CONFIG.STIMULUS_TYPES.GO);
                
                if (isGoStimulus && !didRespond) {
                    return 'âœ— å¤ªæ…¢äº†ï¼è¦æŒ‰æŒ‰éˆ•ï¼';
                }
                
                if (!isGoStimulus && didRespond) {
                    return 'âœ— è¦å¿ä½ä¸æŒ‰ï¼';
                }
                
                return 'âœ— éŒ¯èª¤';
            },
            
            /**
             * å»ºç«‹è©¦é¡Œè¨˜éŒ„ç‰©ä»¶
             * 
             * @param {number} trialNumber - é¡Œè™Ÿ
             * @param {string} stimulusType - åˆºæ¿€é¡å‹
             * @param {boolean} didRespond - æ˜¯å¦æœ‰åæ‡‰
             * @param {boolean} isCorrect - æ˜¯å¦æ­£ç¢º
             * @param {number|null} reactionTime - åæ‡‰æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰
             * @returns {Object} è©¦é¡Œè¨˜éŒ„ç‰©ä»¶
             */
            createTrialRecord: function(trialNumber, stimulusType, didRespond, isCorrect, reactionTime) {
                return {
                    trialNumber: trialNumber,
                    stimulusType: stimulusType,
                    didRespond: didRespond,
                    isCorrect: isCorrect,
                    reactionTime: reactionTime
                };
            }
        };


        /* 
        ============================================================
        3.6 çµ±è¨ˆè¨ˆç®—å™¨ (StatisticsCalculator)
        ============================================================
        èªªæ˜ï¼šè² è²¬è¨ˆç®—éŠæˆ²çµæœçš„å„é …çµ±è¨ˆæŒ‡æ¨™
        è·è²¬ï¼š
        - è¨ˆç®—æ­£ç¢ºç‡
        - è¨ˆç®—å¹³å‡åæ‡‰æ™‚é–“
        - è¨ˆç®—æŠ‘åˆ¶æˆåŠŸç‡
        ============================================================
        */
        const StatisticsCalculator = {
            
            /**
             * è¨ˆç®—æ‰€æœ‰çµ±è¨ˆæŒ‡æ¨™
             * 
             * @param {Array} trialDataRecords - è©¦é¡Œè¨˜éŒ„é™£åˆ—
             * @param {boolean} isMemoryTestCorrect - è¨˜æ†¶æ¸¬è©¦æ˜¯å¦æ­£ç¢º
             * @returns {Object} åŒ…å«æ‰€æœ‰çµ±è¨ˆæŒ‡æ¨™çš„ç‰©ä»¶
             */
            calculateAllStatistics: function(trialDataRecords, isMemoryTestCorrect) {
                return {
                    totalTrials: GAME_CONFIG.TOTAL_TRIALS,
                    correctCount: this.calculateCorrectCount(trialDataRecords),
                    accuracyRate: this.calculateAccuracyRate(trialDataRecords),
                    averageReactionTime: this.calculateAverageReactionTime(trialDataRecords),
                    inhibitionRate: this.calculateInhibitionRate(trialDataRecords),
                    memoryTestResult: isMemoryTestCorrect ? 'âœ“ æ­£ç¢º' : 'âœ— éŒ¯èª¤'
                };
            },
            
            /**
             * è¨ˆç®—æ­£ç¢ºæ¬¡æ•¸
             */
            calculateCorrectCount: function(trialDataRecords) {
                return trialDataRecords.filter(record => record.isCorrect).length;
            },
            
            /**
             * è¨ˆç®—æ­£ç¢ºç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
             */
            calculateAccuracyRate: function(trialDataRecords) {
                const correctCount = this.calculateCorrectCount(trialDataRecords);
                return Math.round(correctCount / trialDataRecords.length * 100);
            },
            
            /**
             * è¨ˆç®— Go è©¦é¡Œçš„å¹³å‡åæ‡‰æ™‚é–“
             * 
             * åªè¨ˆç®—ã€Œæ­£ç¢ºä¸”æœ‰åæ‡‰ã€çš„ Go è©¦é¡Œ
             * 
             * @returns {string} å¹³å‡åæ‡‰æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰æˆ– '-'
             */
            calculateAverageReactionTime: function(trialDataRecords) {
                // ç¯©é¸ï¼šGo è©¦é¡Œ + æ­£ç¢º + æœ‰åæ‡‰æ™‚é–“
                const validGoTrials = trialDataRecords.filter(record => 
                    record.stimulusType === GAME_CONFIG.STIMULUS_TYPES.GO &&
                    record.isCorrect &&
                    record.reactionTime !== null
                );
                
                // æ—©æœŸè¿”å›ï¼šæ²’æœ‰æœ‰æ•ˆè³‡æ–™
                if (validGoTrials.length === 0) {
                    return '-';
                }
                
                // è¨ˆç®—å¹³å‡å€¼
                const totalReactionTime = validGoTrials.reduce(
                    (sum, record) => sum + record.reactionTime, 0
                );
                
                return Math.round(totalReactionTime / validGoTrials.length);
            },
            
            /**
             * è¨ˆç®—æŠ‘åˆ¶æˆåŠŸç‡
             * 
             * æŠ‘åˆ¶æˆåŠŸç‡ = æ­£ç¢ºçš„ No-Go è©¦é¡Œæ•¸ / ç¸½ No-Go è©¦é¡Œæ•¸
             * 
             * @returns {string} æŠ‘åˆ¶æˆåŠŸç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰æˆ– '-'
             */
            calculateInhibitionRate: function(trialDataRecords) {
                // ç¯©é¸æ‰€æœ‰ No-Go è©¦é¡Œ
                const nogoTrials = trialDataRecords.filter(
                    record => record.stimulusType === GAME_CONFIG.STIMULUS_TYPES.NOGO
                );
                
                // æ—©æœŸè¿”å›ï¼šæ²’æœ‰ No-Go è©¦é¡Œ
                if (nogoTrials.length === 0) {
                    return '-';
                }
                
                // è¨ˆç®—æˆåŠŸæŠ‘åˆ¶çš„æ•¸é‡
                const successfulInhibitions = nogoTrials.filter(record => record.isCorrect).length;
                
                return Math.round(successfulInhibitions / nogoTrials.length * 100);
            }
        };


        /* 
        ============================================================
        3.7 è³‡æ–™åŒ¯å‡ºå™¨ (DataExporter)
        ============================================================
        èªªæ˜ï¼šè² è²¬å°‡éŠæˆ²è³‡æ–™åŒ¯å‡ºç‚º CSV æª”æ¡ˆ
        è·è²¬ï¼š
        - æ ¼å¼åŒ–è³‡æ–™ç‚º CSV æ ¼å¼
        - è™•ç†æª”æ¡ˆä¸‹è¼‰
        ============================================================
        */
        const DataExporter = {
            
            /**
             * åŒ¯å‡ºè³‡æ–™ç‚º CSV æª”æ¡ˆ
             * 
             * CSV æ ¼å¼èªªæ˜ï¼š
             * - ä½¿ç”¨ UTF-8 ç·¨ç¢¼ï¼ˆåŠ å…¥ BOM ç¢ºä¿ Excel æ­£ç¢ºé¡¯ç¤ºä¸­æ–‡ï¼‰
             * - æ¬„ä½ï¼šé¡Œè™Ÿ, é¡å‹, åæ‡‰, æ­£ç¢º, åæ‡‰æ™‚é–“(ms)
             */
            exportToCSV: function() {
                // âœ¨ æ­¥é©Ÿ 1ï¼šä½¿ç”¨è€…ç¢ºèªå°è©±æ¡†
                const confirmed = confirm(
                    'ğŸ“Š è³‡æ–™åŒ¯å‡ºèªªæ˜\n\n' +
                    'å³å°‡åŒ¯å‡ºéŠæˆ²è¡¨ç¾è³‡æ–™ç‚º CSV æª”æ¡ˆ\n\n' +
                    'æª”æ¡ˆå…§å®¹åŒ…å«ï¼š\n' +
                    'â€¢ è©¦é¡Œç·¨è™Ÿ\n' +
                    'â€¢ åˆºæ¿€é¡å‹ï¼ˆæ˜Ÿæ˜Ÿ/å‰å‰ï¼‰\n' +
                    'â€¢ æ˜¯å¦æŒ‰ä¸‹æŒ‰éˆ•\n' +
                    'â€¢ ç­”é¡Œæ­£ç¢ºæ€§\n' +
                    'â€¢ åæ‡‰æ™‚é–“\n\n' +
                    'æ­¤è³‡æ–™åƒ…ä¾›ç ”ç©¶æˆ–æ•™å­¸ä½¿ç”¨\n' +
                    'ä¸åŒ…å«ä»»ä½•å€‹äººéš±ç§è³‡è¨Š\n\n' +
                    'æ˜¯å¦ç¹¼çºŒåŒ¯å‡ºï¼Ÿ'
                );
                
                // âœ¨ æ­¥é©Ÿ 2ï¼šä½¿ç”¨è€…å–æ¶ˆå‰‡è¿”å›
                if (!confirmed) {
                    console.log('ä½¿ç”¨è€…å–æ¶ˆåŒ¯å‡º');
                    return;
                }
                
                // å»ºç«‹ CSV æ¨™é¡Œè¡Œ
                let csvContent = 'é¡Œè™Ÿ,é¡å‹,åæ‡‰,æ­£ç¢º,åæ‡‰æ™‚é–“(ms)\n';
                
                // åŠ å…¥æ¯ä¸€é¡Œçš„è³‡æ–™
                GameState.trialDataRecords.forEach(record => {
                    const row = [
                        record.trialNumber,
                        record.stimulusType,
                        record.didRespond ? 'æœ‰æŒ‰' : 'æ²’æŒ‰',
                        record.isCorrect ? 'æ­£ç¢º' : 'éŒ¯èª¤',
                        record.reactionTime || ''
                    ].join(',');
                    
                    csvContent += row + '\n';
                });
                
                // âœ¨ æ­¥é©Ÿ 3ï¼šè¨˜éŒ„è³‡æ–™ç­†æ•¸ï¼ˆæ–¹ä¾¿é™¤éŒ¯ï¼‰
                const recordCount = GameState.trialDataRecords.length;
                console.log(`æº–å‚™åŒ¯å‡º ${recordCount} ç­†è³‡æ–™`);
                
                // è§¸ç™¼ä¸‹è¼‰
                const fileName = this.generateFileName();
                this.downloadFile(csvContent, fileName);
                
                // âœ¨ æ­¥é©Ÿ 4ï¼šé¡¯ç¤ºæˆåŠŸè¨Šæ¯
                alert(
                    `âœ… è³‡æ–™åŒ¯å‡ºæˆåŠŸï¼\n\n` +
                    `æª”æ¡ˆåç¨±ï¼š${fileName}\n` +
                    `è³‡æ–™ç­†æ•¸ï¼š${recordCount} ç­†`
                );
            },
            /**
             * ç”¢ç”Ÿæª”æ¡ˆåç¨±
             * 
             * @returns {string} åŒ…å«æ—¥æœŸçš„æª”æ¡ˆåç¨±
             */
            generateFileName: function() {
                const today = new Date().toISOString().slice(0, 10); // YYYY-MM-DD
                return `éŠæˆ²æ•¸æ“š_${today}.csv`;
            },
            
            /**
             * è§¸ç™¼æª”æ¡ˆä¸‹è¼‰
             * 
             * @param {string} content - æª”æ¡ˆå…§å®¹
             * @param {string} fileName - æª”æ¡ˆåç¨±
             * 
             * æŠ€è¡“èªªæ˜ï¼š
             * - ä½¿ç”¨ Blob ç‰©ä»¶å»ºç«‹æª”æ¡ˆ
             * - '\ufeff' æ˜¯ UTF-8 BOMï¼Œç¢ºä¿ Excel æ­£ç¢ºè­˜åˆ¥ç·¨ç¢¼
             * - å‹•æ…‹å»ºç«‹ <a> å…ƒç´ è§¸ç™¼ä¸‹è¼‰
             */
            downloadFile: function(content, fileName) {
                // å»ºç«‹ Blobï¼ˆåŠ å…¥ BOM ç¢ºä¿ä¸­æ–‡æ­£ç¢ºé¡¯ç¤ºï¼‰
                const blob = new Blob(
                    ['\ufeff' + content], 
                    { type: 'text/csv;charset=utf-8' }
                );
                
                // å»ºç«‹ä¸‹è¼‰é€£çµ
                const downloadUrl = URL.createObjectURL(blob);
                const downloadLink = document.createElement('a');
                downloadLink.href = downloadUrl;
                downloadLink.download = fileName;
                
                // è§¸ç™¼ä¸‹è¼‰
                downloadLink.click();
                
                // æ¸…ç†
                URL.revokeObjectURL(downloadUrl);
            }
        };


        /* 
        ============================================================
        3.8 éŠæˆ²æ§åˆ¶å™¨ (GameController)
        ============================================================
        èªªæ˜ï¼šä¸»æ§åˆ¶å™¨ï¼Œå”èª¿å„æ¨¡çµ„çš„é‹ä½œ
        è·è²¬ï¼š
        - æ§åˆ¶éŠæˆ²æµç¨‹ï¼ˆé–‹å§‹ã€é€²è¡Œã€çµæŸï¼‰
        - è™•ç†ä½¿ç”¨è€…è¼¸å…¥
        - å”èª¿å„æ¨¡çµ„ä¹‹é–“çš„äº’å‹•
        ============================================================
        */
        const GameController = {
            
            /**
             * é–‹å§‹æ–°éŠæˆ²
             * 
             * æµç¨‹ï¼š
             * 1. ç”¢ç”Ÿæ–°çš„åˆºæ¿€åºåˆ—
             * 2. é‡ç½®éŠæˆ²ç‹€æ…‹
             * 3. åˆ‡æ›åˆ°éŠæˆ²ç•«é¢
             * 4. é–‹å§‹ç¬¬ä¸€é¡Œ
             */
            startGame: function() {
                // ç”¢ç”Ÿéš¨æ©Ÿåˆºæ¿€åºåˆ—
                const newSequence = StimulusGenerator.generateRandomSequence();
                
                // é‡ç½®éŠæˆ²ç‹€æ…‹
                GameState.reset(newSequence);
                
                // æ›´æ–°ä»‹é¢
                UIManager.showScreen('gameScreen');
                UIManager.updateTrialDisplay(1, GAME_CONFIG.TOTAL_TRIALS);
                UIManager.updateScoreDisplay(0, 0);
                UIManager.updateProgressBar(0);
                
                // å»¶é² 1 ç§’å¾Œé–‹å§‹ç¬¬ä¸€é¡Œï¼ˆçµ¦ç©å®¶æº–å‚™æ™‚é–“ï¼‰
                setTimeout(() => this.startNextTrial(), 1000);
            },
            
            /**
             * é–‹å§‹ä¸‹ä¸€é¡Œ
             * 
             * æµç¨‹ï¼š
             * 1. æ¸…é™¤ä¹‹å‰çš„è¨ˆæ™‚å™¨ï¼ˆé˜²æ­¢é‡è¤‡è§¸ç™¼ï¼‰
             * 2. æª¢æŸ¥æ˜¯å¦å·²å®Œæˆæ‰€æœ‰è©¦é¡Œ
             * 3. æ›´æ–°ç‹€æ…‹èˆ‡ä»‹é¢
             * 4. å‘ˆç¾åˆºæ¿€
             * 5. è¨­å®šåæ‡‰æ™‚é–“é™åˆ¶
             */
            startNextTrial: function() {
                // [é‡è¦] æ¸…é™¤ä¹‹å‰çš„è¨ˆæ™‚å™¨ï¼Œé˜²æ­¢é‡è¤‡è™•ç†
                this.clearCurrentTimeout();
                
                // æª¢æŸ¥æ˜¯å¦å·²å®Œæˆæ‰€æœ‰è©¦é¡Œ
                if (GameState.currentTrialNumber >= GAME_CONFIG.TOTAL_TRIALS) {
                    this.showMemoryTest();
                    return;
                }
                
                // æ›´æ–°ç‹€æ…‹
                GameState.currentTrialNumber++;
                GameState.hasRespondedToCurrentTrial = false;
                GameState.isCurrentTrialProcessed = false;
                
                // å–å¾—ç•¶å‰åˆºæ¿€é¡å‹
                const currentStimulus = GameState.stimulusSequence[GameState.currentTrialNumber - 1];
                GameState.currentStimulusType = currentStimulus;
                
                // æ›´æ–°ä»‹é¢
                const progressPercentage = (GameState.currentTrialNumber / GAME_CONFIG.TOTAL_TRIALS) * 100;
                UIManager.updateTrialDisplay(GameState.currentTrialNumber, GAME_CONFIG.TOTAL_TRIALS);
                UIManager.updateProgressBar(progressPercentage);
                UIManager.clearFeedback();
                UIManager.displayStimulus(currentStimulus);
                
                // è¨˜éŒ„åˆºæ¿€å‘ˆç¾æ™‚é–“ï¼ˆç”¨æ–¼è¨ˆç®—åæ‡‰æ™‚é–“ï¼‰
                GameState.stimulusOnsetTime = Date.now();
                
                // è¨­å®šåˆºæ¿€æ¶ˆå¤±çš„è¨ˆæ™‚å™¨
                // [é‡è¦] å„²å­˜ timeout IDï¼Œä»¥ä¾¿åœ¨éœ€è¦æ™‚å–æ¶ˆ
                GameState.currentTimeoutId = setTimeout(() => {
                    // åªæœ‰åœ¨å°šæœªè™•ç†çš„æƒ…æ³ä¸‹æ‰è™•ç†ã€Œæ²’æœ‰åæ‡‰ã€
                    if (!GameState.isCurrentTrialProcessed && GameState.isGameActive) {
                        this.processTrialResponse(false, null);
                    }
                }, GAME_CONFIG.STIMULUS_DURATION_MS);
            },
            
            /**
             * è¨˜éŒ„ç©å®¶çš„åæ‡‰ï¼ˆæŒ‰ä¸‹æŒ‰éˆ•ï¼‰
             * 
             * é˜²è­·æªæ–½ï¼š
             * - æª¢æŸ¥éŠæˆ²æ˜¯å¦é€²è¡Œä¸­
             * - æª¢æŸ¥æ˜¯å¦å·²ç¶“åæ‡‰é
             * - æª¢æŸ¥è©¦é¡Œæ˜¯å¦å·²è™•ç†
             */
            recordResponse: function() {
                // æ—©æœŸè¿”å›ï¼šå„ç¨®ç„¡æ•ˆæƒ…æ³
                if (!GameState.isGameActive) {
                    return;
                }
                
                if (GameState.hasRespondedToCurrentTrial) {
                    return;
                }
                
                if (GameState.isCurrentTrialProcessed) {
                    return;
                }
                
                // æ¨™è¨˜å·²åæ‡‰
                GameState.hasRespondedToCurrentTrial = true;
                
                // [é‡è¦] ç«‹å³æ¸…é™¤è¨ˆæ™‚å™¨ï¼Œé˜²æ­¢é‡è¤‡è™•ç†
                this.clearCurrentTimeout();
                
                // è¨ˆç®—åæ‡‰æ™‚é–“
                const reactionTime = Date.now() - GameState.stimulusOnsetTime;
                
                // è™•ç†é€™æ¬¡åæ‡‰
                this.processTrialResponse(true, reactionTime);
            },
            
            /**
             * è™•ç†è©¦é¡Œåæ‡‰
             * 
             * @param {boolean} didRespond - æ˜¯å¦æœ‰åæ‡‰
             * @param {number|null} reactionTime - åæ‡‰æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰
             */
            processTrialResponse: function(didRespond, reactionTime) {
                // [é‡è¦] é˜²æ­¢é‡è¤‡è™•ç†åŒä¸€é¡Œ
                if (GameState.isCurrentTrialProcessed) {
                    return;
                }
                GameState.isCurrentTrialProcessed = true;
                
                // åˆ¤æ–·æ­£ç¢ºæ€§
                const isCorrect = TrialProcessor.determineResponseCorrectness(
                    GameState.currentStimulusType,
                    didRespond
                );
                
                // æ›´æ–°è¨ˆæ•¸
                if (isCorrect) {
                    GameState.correctResponseCount++;
                } else {
                    GameState.errorResponseCount++;
                }
                
                // å»ºç«‹ä¸¦å„²å­˜è©¦é¡Œè¨˜éŒ„
                const trialRecord = TrialProcessor.createTrialRecord(
                    GameState.currentTrialNumber,
                    GameState.currentStimulusType,
                    didRespond,
                    isCorrect,
                    reactionTime
                );
                GameState.trialDataRecords.push(trialRecord);
                
                // é¡¯ç¤ºå›é¥‹
                const feedbackMessage = TrialProcessor.generateFeedbackMessage(
                    GameState.currentStimulusType,
                    didRespond,
                    isCorrect
                );
                UIManager.displayFeedback(feedbackMessage, isCorrect);
                UIManager.updateScoreDisplay(
                    GameState.correctResponseCount,
                    GameState.errorResponseCount
                );
                
                // æ¸…é™¤åˆºæ¿€é¡¯ç¤º
                UIManager.displayStimulus('neutral');
                
                // é€²å…¥ä¸‹ä¸€é¡Œ
                setTimeout(() => this.startNextTrial(), GAME_CONFIG.INTER_TRIAL_INTERVAL_MS);
            },
            
            /**
             * æ¸…é™¤ç•¶å‰çš„è¨ˆæ™‚å™¨
             * 
             * ç‚ºä»€éº¼éœ€è¦é€™å€‹æ–¹æ³•ï¼Ÿ
             * ç•¶ç©å®¶æŒ‰ä¸‹æŒ‰éˆ•å¾Œï¼Œéœ€è¦å–æ¶ˆåŸæœ¬è¨­å®šçš„ã€Œç„¡åæ‡‰ã€è¨ˆæ™‚å™¨ï¼Œ
             * å¦å‰‡æœƒå°è‡´åŒä¸€é¡Œè¢«è™•ç†å…©æ¬¡ï¼ˆé‡è¤‡è¨˜éŒ„çš„ bugï¼‰
             */
            clearCurrentTimeout: function() {
                if (GameState.currentTimeoutId !== null) {
                    clearTimeout(GameState.currentTimeoutId);
                    GameState.currentTimeoutId = null;
                }
            },
            
            /**
             * é¡¯ç¤ºè¨˜æ†¶æ¸¬è©¦
             */
            showMemoryTest: function() {
                GameState.isGameActive = false;
                UIManager.showScreen('memoryTestScreen');
            },
            
            /**
             * æª¢æŸ¥è¨˜æ†¶æ¸¬è©¦ç­”æ¡ˆ
             * 
             * @param {string} answer - ç©å®¶çš„ç­”æ¡ˆï¼ˆ'star' æˆ– 'cross'ï¼‰
             */
            checkMemoryAnswer: function(answer) {
                // å–å¾—å€’æ•¸ç¬¬äºŒå€‹åˆºæ¿€çš„æ­£ç¢ºç­”æ¡ˆ
                const secondLastStimulus = GameState.stimulusSequence[GAME_CONFIG.TOTAL_TRIALS - 2];
                const correctAnswer = (secondLastStimulus === GAME_CONFIG.STIMULUS_TYPES.GO) 
                    ? 'star' 
                    : 'cross';
                
                // åˆ¤æ–·æ˜¯å¦æ­£ç¢º
                GameState.isMemoryTestCorrect = (answer === correctAnswer);
                
                // é¡¯ç¤ºçµæœ
                this.showResults();
            },
            
            /**
             * é¡¯ç¤ºéŠæˆ²çµæœ
             */
            showResults: function() {
                // è¨ˆç®—çµ±è¨ˆè³‡æ–™
                const statistics = StatisticsCalculator.calculateAllStatistics(
                    GameState.trialDataRecords,
                    GameState.isMemoryTestCorrect
                );
                
                // æ›´æ–°ä»‹é¢
                UIManager.showScreen('resultScreen');
                UIManager.displayResults(statistics);
                UIManager.populateDataTable(GameState.trialDataRecords);
            },
            
            /**
             * é‡æ–°é–‹å§‹éŠæˆ²
             */
            restartGame: function() {
                UIManager.showScreen('startScreen');
            }
        };


        /* 
        ============================================================
        3.9 éµç›¤äº‹ä»¶ç›£è½
        ============================================================
        èªªæ˜ï¼šå…è¨±ä½¿ç”¨ç©ºç™½éµä½œç‚ºåæ‡‰æŒ‰éˆ•çš„æ›¿ä»£æ–¹å¼
        è¨­è¨ˆè€ƒé‡ï¼šæä¾›å¤šç¨®è¼¸å…¥æ–¹å¼ï¼Œå¢åŠ å¯åŠæ€§
        ============================================================
        */
        document.addEventListener('keydown', function(event) {
            // åªåœ¨éŠæˆ²é€²è¡Œä¸­ä¸”æŒ‰ä¸‹ç©ºç™½éµæ™‚è§¸ç™¼
            if (event.code === 'Space' && GameState.isGameActive) {
                // é˜²æ­¢ç©ºç™½éµçš„é è¨­è¡Œç‚ºï¼ˆé é¢æ²å‹•ï¼‰
                event.preventDefault();
                
                // è§¸ç™¼åæ‡‰
                GameController.recordResponse();
            }
        });


        /*
        ============================================================
        ç¨‹å¼ç¢¼çµæŸ
        ============================================================
        
        ä¿®æ”¹æŒ‡å—ï¼š
        
        1. èª¿æ•´éŠæˆ²é›£åº¦ï¼š
           ä¿®æ”¹ GAME_CONFIG ä¸­çš„åƒæ•¸
           - TOTAL_TRIALS: é¡Œæ•¸
           - STIMULUS_DURATION_MS: åæ‡‰æ™‚é–“é™åˆ¶
           - GO_STIMULUS_RATIO: Go/No-Go æ¯”ä¾‹
        
        2. æ›´æ›åˆºæ¿€ç¬¦è™Ÿï¼š
           ä¿®æ”¹ GAME_CONFIG.STIMULUS_SYMBOLS
           ä¾‹å¦‚ï¼šå°‡æ˜Ÿæ˜Ÿæ›æˆç¬‘è‡‰ ğŸ˜Šï¼Œå‰å‰æ›æˆç”Ÿæ°£è‡‰ ğŸ˜ 
        
        3. èª¿æ•´è¦–è¦ºæ¨£å¼ï¼š
           ä¿®æ”¹ CSS å€å¡Šä¸­çš„é¡è‰²ã€å¤§å°ç­‰å±¬æ€§
        
        4. æ–°å¢åŠŸèƒ½ï¼š
           éµå¾ªç¾æœ‰çš„æ¨¡çµ„åŒ–æ¶æ§‹ï¼Œæ–°å¢ç¨ç«‹çš„æ¨¡çµ„
           ä¾‹å¦‚ï¼šæ–°å¢éŸ³æ•ˆæ¨¡çµ„ (SoundManager)
        ============================================================
        */
    </script>
</body>
</html>
